log:
  loglevel: debug
inbounds:
  - listen: 0.0.0.0
    port: 443
    protocol: vless
    settings:
      clients:
        - id: "{{XRAY_UUID}}"
          level: 0
          email: general@vless-vision
          flow: xtls-rprx-vision
      decryption: none
      fallbacks:
        # fallback reality non vision connections to xhttp
        - dest: /dev/shm/xhttp.sock
          xver: 0
    streamSettings:
      network: raw
      security: reality
      realitySettings:
        # disable verbose logging
        show: false
        # the "reality" website is the nginx proxied site
        dest: /dev/shm/nginx.sock
        xver: 0
        serverNames:
          - "{{REALITY_DOMAIN}}"
          # Allow some additional commonly unrestricted domains
          - "aa.com"
          - "akamai.com"
          - "akamaized.net"
          - "amazon.com"
          - "api.bilibili.com"
          - "apple.com"
          - "apps.apple.com"
          - "archive.g4t1.pro"
          - "archive.linux.duke.edu"
          - "archive.ubuntu.mirror.ba"
          - "archive.ubuntu.mirror.rafal.ca"
          - "archive.ubuntu.nautile.nc"
          - "bilibili.com"
          - "blog.launchpad.net"
          - "canonical.com"
          - "cathaypacific.com"
          - "cesium.di.uminho.pt"
          - "clearme.com"
          - "cloudflare.com"
          - "cz.archive.ubuntu.com"
          - "deb.campolargo.pr.gov.br"
          - "delta.com"
          - "distrohub.kyiv.ua"
          - "documentation.ubuntu.com"
          - "drmirror.physi.uni-heidelberg.de"
          - "duck.ai"
          - "en.wikipedia.org"
          - "fastly.com"
          - "fastly.net"
          - "flightaware.com"
          - "flights.flyfrontier.com"
          - "ftp-stud.hs-esslingen.de"
          - "ftp.energotel.sk"
          - "ftp.kaist.ac.kr"
          - "ftp.linux.edu.lv"
          - "ftp.ludd.ltu.se"
          - "ftp.lysator.liu.se"
          - "ftp.rnl.tecnico.ulisboa.pt"
          - "ftp.rz.tu-bs.de"
          - "ftp.tsukuba.wide.ad.jp"
          - "gstatic.com"
          - "help.launchpad.net"
          - "help.ubuntu.com"
          - "http.krfoss.org"
          - "i0.hdslb.com"
          - "insideduckduckgo.substack.com"
          - "it1.mirror.vhosting-it.com"
          - "it2.mirror.vhosting-it.com"
          - "kr.mirror.tefexia.net"
          - "linux.domainesia.com"
          - "linux.yz.yamagata-u.ac.jp"
          - "matrix.org"
          - "meteversecloud.com"
          - "miroir.univ-lorraine.fr"
          - "mirror.0-1.cloud"
          - "mirror.01link.hk"
          - "mirror.2degrees.nz"
          - "mirror.aarnet.edu.au"
          - "mirror.amscloud.co.id"
          - "mirror.arizona.edu"
          - "mirror.arvancloud.ir"
          - "mirror.as.kamatera.com"
          - "mirror.bahnhof.net"
          - "mirror.battern.eu"
          - "mirror.ca-tr.kamatera.com"
          - "mirror.citrahost.com"
          - "mirror.cloudhosting.lv"
          - "mirror.coganng.com"
          - "mirror.corbina.net"
          - "mirror.cosmiclinux.com"
          - "mirror.daniel-jost.net"
          - "mirror.datamossa.io"
          - "mirror.dogado.de"
          - "mirror.ekiphost.com"
          - "mirror.elice.io"
          - "mirror.eliv.digital"
          - "mirror.eu-fr.kamatera.com"
          - "mirror.eu-lo.kamatera.com"
          - "mirror.eu.4psacloud.com"
          - "mirror.eu.kamatera.com"
          - "mirror.fmt-2.serverforge.org"
          - "mirror.freedif.org"
          - "mirror.fst.kz"
          - "mirror.funkfreundelandshut.de"
          - "mirror.gi.co.id"
          - "mirror.gofoss.xyz"
          - "mirror.hep.gg"
          - "mirror.hnd.cl"
          - "mirror.ihost.md"
          - "mirror.il-ha.kamatera.com"
          - "mirror.il-pt.kamatera.com"
          - "mirror.il-rh.kamatera.com"
          - "mirror.il-ta.kamatera.com"
          - "mirror.il.kamatera.com"
          - "mirror.improve.nordlo.cloud"
          - "mirror.init7.net"
          - "mirror.iranserver.com"
          - "mirror.its-tps.fr"
          - "mirror.jagoanhosting.id"
          - "mirror.jeonnam.school"
          - "mirror.kamp.de"
          - "mirror.kku.ac.th"
          - "mirror.krfoss.org"
          - "mirror.kumi.systems"
          - "mirror.lc"
          - "mirror.linkdata.com"
          - "mirror.liquidrp.de"
          - "mirror.maeen.sa"
          - "mirror.marwan.ma"
          - "mirror.mirohost.net"
          - "mirror.mrjester.net"
          - "mirror.neolabs.kz"
          - "mirror.netsite.dk"
          - "mirror.nevacloud.com"
          - "mirror.niif.hu"
          - "mirror.nju.edu.cn"
          - "mirror.nyist.edu.cn"
          - "mirror.papua.go.id"
          - "mirror.ps.kz"
          - "mirror.raiolanetworks.com"
          - "mirror.rcg.sfu.ca"
          - "mirror.scaleuptech.com"
          - "mirror.servaxnet.com"
          - "mirror.sg.gs"
          - "mirror.techlabs.co.kr"
          - "mirror.telepoint.bg"
          - "mirror.thunderhosting.cloud"
          - "mirror.tuke.sk"
          - "mirror.ubuntu.serverforge.org"
          - "mirror.uepg.br"
          - "mirror.ufscar.br"
          - "mirror.umd.edu"
          - "mirror.unair.ac.id"
          - "mirror.unet.by"
          - "mirror.us-ny2.kamatera.com"
          - "mirror.us-sc.kamatera.com"
          - "mirror.us-tx.kamatera.com"
          - "mirror.veesp.com"
          - "mirror.verinomi.com"
          - "mirror.webworld.ie"
          - "mirror.xeonbd.com"
          - "mirror.xtom.com.hk"
          - "mirror.yuki.net.uk"
          - "mirror.zzunipark.com"
          - "mirror1.ku.ac.th"
          - "mirror2.tuxinator.org"
          - "mirrors.aliyun.com"
          - "mirrors.arcuslayer.com"
          - "mirrors.atlas.net.co"
          - "mirrors.bangmod.cloud"
          - "mirrors.bfsu.edu.cn"
          - "mirrors.bmcc.edu"
          - "mirrors.c0urier.net"
          - "mirrors.cloud.tencent.com"
          - "mirrors.dotsrc.org"
          - "mirrors.esto.network"
          - "mirrors.gethosted.online"
          - "mirrors.gigenet.com"
          - "mirrors.ipserverone.com"
          - "mirrors.iu13.net"
          - "mirrors.jlu.edu.cn"
          - "mirrors.krnk.org"
          - "mirrors.layeronline.com"
          - "mirrors.lug.mtu.edu"
          - "mirrors.maine.edu"
          - "mirrors.melbourne.co.uk"
          - "mirrors.mit.edu"
          - "mirrors.neusoft.edu.cn"
          - "mirrors.nxtgen.com"
          - "mirrors.ocf.berkeley.edu"
          - "mirrors.pardisco.co"
          - "mirrors.qlu.edu.cn"
          - "mirrors.sarak.as"
          - "mirrors.sdu.edu.cn"
          - "mirrors.sjtug.sjtu.edu.cn"
          - "mirrors.sohu.com"
          - "mirrors.tuna.tsinghua.edu.cn"
          - "mirrors.ukfast.co.uk"
          - "mirrors.us.kernel.org"
          - "mirrors.ustc.edu.cn"
          - "mirrors.xjtu.edu.cn"
          - "mirrors.xtom.com"
          - "mirrors.xtom.de"
          - "mirrors.xtom.ee"
          - "mirrors.xtom.nl"
          - "mirrors.zju.edu.cn"
          - "no.archive.ubuntu.com"
          - "opensource.xtdv.net"
          - "paypal.com"
          - "pkg.adfinis-on-exoscale.ch"
          - "pkg.adfinis.com"
          - "plug-mirror.rcac.purdue.edu"
          - "repo.extreme-ix.org"
          - "repo.iut.ac.ir"
          - "repo.morgan.kr"
          - "repos.del.extreme-ix.org"
          - "s0.hdslb.com"
          - "s1.hdslb.com"
          - "schema.org"
          - "signal.org"
          - "softlibre.unizar.es"
          - "speed.cloudflare.com"
          - "start.duckduckgo.com"
          - "storage.dim.uchile.cl"
          - "stripe.com"
          - "tw1.mirror.blendbyte.net"
          - "ubuntu-archive.mirror.liquidtelecom.com"
          - "ubuntu-mirror.snu.edu.in"
          - "ubuntu.anexia.at"
          - "ubuntu.ccns.ncku.edu.tw"
          - "ubuntu.com"
          - "ubuntu.ethz.ch"
          - "ubuntu.hi.no"
          - "ubuntu.ip-connect.vn.ua"
          - "ubuntu.koyanet.lv"
          - "ubuntu.lafibre.info"
          - "ubuntu.mirror-services.net"
          - "ubuntu.mirror.constant.com"
          - "ubuntu.mirror.garr.it"
          - "ubuntu.mirror.net.za"
          - "ubuntu.mirror.rafal.ca"
          - "ubuntu.mirror.shastacoe.net"
          - "ubuntu.netforce.hosting"
          - "ubuntu.org.ua"
          - "ubuntu.parsvds.com"
          - "ubuntu.syxpi.fr"
          - "ubuntu.ucr.ac.cr"
          - "ubuntu.unc.edu.ar"
          - "ubuntu.univ-reims.fr"
          - "ubuntu.volia.net"
          - "ubuntu.vpsttt.com"
          - "united.com"
          - "vultr.com"
          - "wiki.ubuntu.com"
          - "www.9news.com"
          - "www.aa.com"
          - "www.akamai.com"
          - "www.amazon.com"
          - "www.apple.com"
          - "www.bilibili.com"
          - "www.cathaypacific.com"
          - "www.cheapflights.com"
          - "www.clearme.com"
          - "www.cloudflare.com"
          - "www.cnbc.com"
          - "www.delta.com"
          - "www.denverpost.com"
          - "www.expedia.com"
          - "www.fastly.com"
          - "www.fastly.net"
          - "www.flightaware.com"
          - "www.flights.com"
          - "www.gstatic.com"
          - "www.jetblue.com"
          - "www.kayak.com"
          - "www.lastminute.com"
          - "www.matrix.org"
          - "www.orbitz.com"
          - "www.paypal.com"
          - "www.priceline.com"
          - "www.reddit.com"
          - "www.royalcaribbean.com"
          - "www.signal.org"
          - "www.skyscanner.com"
          - "www.stripe.com"
          - "www.travelocity.com"
          - "www.ubuntu.com"
          - "www.united.com"
          - "www.usatoday.com"
          - "www.vultr.com"
          - "www.w3.org"
          - "www.yahoo.com"
        privateKey: "{{XRAY_REALITY_PRIVATE_KEY}}"
        shortIds:
          # If this item exists, client shortId can be empty
          - ""
          # 0 to f, length is a multiple of 2, maximum length is 16
          - "{{XRAY_REALITY_SHORT_ID}}"
      # sockopt:
      #   tcpFastOpen: true
      #   tcpcongestion: bbr
      #   tcpMptcp: true
      #   tcpNoDelay: true
    tag: VISION+REALITY
    # sniffing:
    #   enabled: true
    #   destOverride:
    #     - http
    #     - tls
    #     - quic
    #   metadataOnly: false
    #   routeOnly: true
  - listen: /dev/shm/xhttp.sock,0666
    protocol: vless
    settings:
      clients:
        - id: "{{XRAY_UUID}}"
          level: 0
          email: general@vless-xhttp
      decryption: none
    streamSettings:
      network: xhttp
      xhttpSettings:
        # It is recommended that the server does not verify the host, which will
        # allow the client to have more gameplay
        host: ""
        path: "{{XRAY_XHTTP_PATH}}"
        # The server is recommended to be set to auto, allowing all client
        # upload modes, which will give the client more gameplay
        mode: auto
        # The parameters in extra are already optimal by default and can be left
        # blank.
        extra:
          # Server only, set to true if there are compatibility issues
          noSSEHeader: false
          # Allows the client to carry 1MB of data per POST, only works in
          # packet-up mode
          scMaxEachPostBytes: 1000000
          # The server caches up to 30 POST requests, only in packet-up mode
          # (only set on the server)
          scMaxBufferedPosts: 30
          xPaddingBytes: 100-1000
      sockopt:
        tcpFastOpen: true
        # When using nginx for reverse proxying, it must be set to false (the
        # default is false, so it is optional)
        acceptProxyProtocol: false
        tcpcongestion: bbr
        tcpMptcp: true
        tcpNoDelay: true
    tag: XHTTP_IN
    # sniffing:
    #   enabled: true
    #   destOverride:
    #     - http
    #     - tls
    #     - quic
    #   metadataOnly: false
    #   routeOnly: true
  - listen: /dev/shm/ws.sock,0666
    protocol: vless
    settings:
      clients:
        - id: "{{XRAY_UUID}}"
          level: 0
          email: general@vless-ws
      decryption: none
    streamSettings:
      network: ws
      security: none
      wsSettings:
        path: "{{XRAY_WS_PATH}}"
    tag: WS_IN
    # sniffing:
    #   enabled: true
    #   destOverride:
    #     - http
    #     - tls
    #     - quic
    #   metadataOnly: false
    #   routeOnly: true
  - listen: /dev/shm/trojan_grpc.sock,0666
    protocol: trojan
    settings:
      clients:
        - password: "{{XRAY_UUID}}"
          email: general@trojangrpc
    streamSettings:
      network: grpc
      security: none
      grpcSettings:
        serviceName: "{{XRAY_TROJAN_GRPC_PATH}}"
    tag: TROJAN_GRPC_IN
  - listen: /dev/shm/trojan_ws.sock,0666
    protocol: trojan
    settings:
      clients:
        - password: "{{XRAY_UUID}}"
          email: general@trojanws
    streamSettings:
      network: ws
      security: none
      wsSettings:
        path: "{{XRAY_TROJAN_WS_PATH}}"
    tag: TROJAN_WS_IN
outbounds: []
